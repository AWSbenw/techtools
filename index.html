<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TechTools Hub</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body { margin: 0; font-family: system-ui, sans-serif; }
    .hub-nav {
      display: flex;
      align-items: center;
      background: #1e293b;
      border-bottom: 1px solid #334155;
      padding: 0 1.5rem;
    }
    .hub-brand {
      color: #f8fafc;
      font-weight: 700;
      font-size: 1rem;
      padding: 0.9rem 1.5rem 0.9rem 0;
      margin-right: 0.5rem;
      border-right: 1px solid #334155;
      cursor: pointer;
      user-select: none;
    }
    .hub-brand span { color: #38bdf8; }
    .hub-tab {
      background: none;
      border: none;
      color: #94a3b8;
      font-size: 0.875rem;
      font-weight: 500;
      padding: 0.9rem 1.25rem;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      margin-bottom: -1px;
      transition: color 0.15s, border-color 0.15s;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }
    .hub-tab:hover { color: #f1f5f9; }
    .hub-tab.active { color: #38bdf8; border-bottom-color: #38bdf8; }

    /* Dark mode toggle in nav */
    .dark-toggle {
      margin-left: auto;
      background: none;
      border: 1px solid #334155;
      border-radius: 8px;
      color: #94a3b8;
      font-size: 0.8rem;
      font-weight: 500;
      padding: 0.4rem 0.85rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      transition: color 0.15s, border-color 0.15s;
    }
    .dark-toggle:hover { color: #f1f5f9; border-color: #64748b; }

    /* Home page tiles */
    .home-page {
      min-height: calc(100vh - 49px);
      padding: 2.5rem;
      transition: background 0.2s;
    }
    .home-page.light { background: #f1f5f9; }
    .home-page.dark  { background: #0f172a; }
    .home-heading { font-size: 1.5rem; font-weight: 700; margin-bottom: 0.4rem; transition: color 0.2s; }
    .home-page.light .home-heading { color: #1e293b; }
    .home-page.dark  .home-heading { color: #f1f5f9; }
    .home-sub { font-size: 0.875rem; color: #64748b; margin-bottom: 2rem; }
    .tiles-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 1.25rem;
      max-width: 900px;
    }
    .tool-tile {
      border-radius: 12px;
      padding: 1.75rem 1.5rem;
      cursor: pointer;
      transition: box-shadow 0.15s, transform 0.15s, border-color 0.15s, background 0.2s;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      text-align: left;
      border: 1px solid;
    }
    .home-page.light .tool-tile { background: #ffffff; border-color: #e2e8f0; }
    .home-page.dark  .tool-tile { background: #1e293b; border-color: #334155; }
    .tool-tile:hover { box-shadow: 0 4px 16px rgba(0,0,0,0.15); transform: translateY(-2px); border-color: #38bdf8 !important; }
    .tool-tile-icon { font-size: 2rem; line-height: 1; }
    .tool-tile-title { font-size: 0.975rem; font-weight: 700; transition: color 0.2s; }
    .home-page.light .tool-tile-title { color: #1e293b; }
    .home-page.dark  .tool-tile-title { color: #f1f5f9; }
    .tool-tile-desc { font-size: 0.8rem; color: #64748b; line-height: 1.5; }
    .tool-tile-badge {
      display: inline-block; font-size: 0.7rem; font-weight: 600;
      padding: 0.2rem 0.55rem; border-radius: 999px; align-self: flex-start; transition: background 0.2s, color 0.2s;
    }
    .home-page.light .tool-tile-badge { background: #e0f2fe; color: #0369a1; }
    .home-page.dark  .tool-tile-badge { background: #0c4a6e; color: #38bdf8; }

    /* Software links section */
    .section-divider {
      max-width: 900px;
      margin: 2.5rem 0 1.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .section-divider-line { flex: 1; height: 1px; }
    .home-page.light .section-divider-line { background: #e2e8f0; }
    .home-page.dark  .section-divider-line { background: #1e293b; }
    .section-divider-label { font-size: 0.75rem; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; white-space: nowrap; }
    .home-page.light .section-divider-label { color: #94a3b8; }
    .home-page.dark  .section-divider-label { color: #475569; }

    .links-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 0.75rem;
      max-width: 900px;
    }
    .link-card {
      border-radius: 10px;
      padding: 1rem 1.1rem;
      border: 1px solid;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      text-decoration: none;
      transition: box-shadow 0.15s, transform 0.15s, border-color 0.15s, background 0.2s;
    }
    .home-page.light .link-card { background: #ffffff; border-color: #e2e8f0; }
    .home-page.dark  .link-card { background: #1e293b; border-color: #334155; }
    .link-card:hover { box-shadow: 0 4px 16px rgba(0,0,0,0.12); transform: translateY(-2px); border-color: #38bdf8 !important; }
    .link-card-icon { font-size: 1.4rem; line-height: 1; flex-shrink: 0; }
    .link-card-body { display: flex; flex-direction: column; gap: 0.15rem; min-width: 0; }
    .link-card-title { font-size: 0.875rem; font-weight: 700; transition: color 0.2s; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .home-page.light .link-card-title { color: #1e293b; }
    .home-page.dark  .link-card-title { color: #f1f5f9; }
    .link-card-desc { font-size: 0.72rem; color: #64748b; line-height: 1.4; }

    /* Entry / Splash Page */
    .entry-page {
      position: fixed;
      inset: 0;
      background: #0f172a;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    .entry-title {
      font-size: 3rem;
      font-weight: 800;
      color: #f8fafc;
      letter-spacing: -0.02em;
      margin-bottom: 0.5rem;
    }
    .entry-title span { color: #38bdf8; }
    .entry-sub {
      font-size: 1rem;
      color: #64748b;
      margin-bottom: 3rem;
    }
    .entry-btn {
      background: #38bdf8;
      color: #0f172a;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 700;
      padding: 0.85rem 2.5rem;
      cursor: pointer;
      letter-spacing: 0.02em;
      transition: background 0.15s, transform 0.1s;
    }
    .entry-btn:hover { background: #7dd3fc; transform: translateY(-2px); }
    .entry-btn:active { transform: translateY(0); }
    .entry-canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
    }
    .entry-content {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
  </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect, useRef } = React;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SUBNET CALCULATOR â€” original artifact, no style changes
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const SubnetCalculator = ({ darkMode }) => {
  const [cidrInput, setCidrInput] = useState('10.0.0.0/16');
  const [rootSubnet, setRootSubnet] = useState(null);
  const [error, setError] = useState('');

  const ipToInt = (ip) => {
    const parts = ip.split('.').map(Number);
    return (parts[0] << 24) + (parts[1] << 16) + (parts[2] << 8) + parts[3];
  };

  const intToIp = (int) => [
    (int >>> 24) & 0xFF,
    (int >>> 16) & 0xFF,
    (int >>> 8) & 0xFF,
    int & 0xFF
  ].join('.');

  const calculateSubnet = (network, prefix) => {
    const networkInt = ipToInt(network);
    const mask = -1 << (32 - prefix);
    const networkAddress = networkInt & mask;
    const broadcastAddress = networkAddress | (~mask >>> 0);
    const firstUsable = prefix === 31 || prefix === 32 ? networkAddress : networkAddress + 1;
    const lastUsable  = prefix === 31 || prefix === 32 ? broadcastAddress : broadcastAddress - 1;
    const totalHosts  = prefix === 32 ? 1 : prefix === 31 ? 2 : Math.pow(2, 32 - prefix) - 2;
    return {
      network: intToIp(networkAddress),
      broadcast: intToIp(broadcastAddress),
      firstUsable: intToIp(firstUsable),
      lastUsable: intToIp(lastUsable),
      prefix,
      subnetMask: intToIp(mask >>> 0),
      totalHosts,
      children: null,
      id: `${intToIp(networkAddress)}/${prefix}`
    };
  };

  const parseCIDR = (cidr) => {
    const match = cidr.match(/^(\d{1,3}\.){3}\d{1,3}\/\d{1,2}$/);
    if (!match) return null;
    const [ip, prefixStr] = cidr.split('/');
    const prefix = parseInt(prefixStr);
    if (prefix < 0 || prefix > 32) return null;
    const parts = ip.split('.').map(Number);
    if (parts.some(p => p < 0 || p > 255)) return null;
    return { ip, prefix };
  };

  const handleCalculate = () => {
    setError('');
    const parsed = parseCIDR(cidrInput.trim());
    if (!parsed) { setError('Invalid CIDR notation. Use format: 192.168.1.0/24'); return; }
    setRootSubnet(calculateSubnet(parsed.ip, parsed.prefix));
  };

  const splitSubnet = (subnet) => {
    if (subnet.prefix >= 32) return subnet;
    const newPrefix = subnet.prefix + 1;
    const firstHalf = calculateSubnet(subnet.network, newPrefix);
    const secondNetworkInt = ipToInt(subnet.network) + Math.pow(2, 32 - newPrefix);
    const secondHalf = calculateSubnet(intToIp(secondNetworkInt), newPrefix);
    return { ...subnet, children: [firstHalf, secondHalf] };
  };

  const updateSubnetTree = (subnet, targetId) => {
    if (subnet.id === targetId) return splitSubnet(subnet);
    if (subnet.children) return { ...subnet, children: subnet.children.map(c => updateSubnetTree(c, targetId)) };
    return subnet;
  };

  const recombineSubnet = (subnet, targetId) => {
    if (subnet.id === targetId) return { ...subnet, children: null };
    if (subnet.children) return { ...subnet, children: subnet.children.map(c => recombineSubnet(c, targetId)) };
    return subnet;
  };

  const handleSplit     = (id) => setRootSubnet(prev => updateSubnetTree(prev, id));
  const handleRecombine = (id) => setRootSubnet(prev => recombineSubnet(prev, id));

  const SubnetBlock = ({ subnet, depth = 0 }) => {
    const lightColors = ['bg-blue-50 border-blue-300','bg-green-50 border-green-300','bg-yellow-50 border-yellow-300','bg-purple-50 border-purple-300','bg-pink-50 border-pink-300','bg-indigo-50 border-indigo-300'];
    const darkColors  = ['bg-blue-950 border-blue-700','bg-green-950 border-green-700','bg-yellow-950 border-yellow-700','bg-purple-950 border-purple-700','bg-pink-950 border-pink-700','bg-indigo-950 border-indigo-700'];
    const colorClass  = darkMode ? darkColors[depth % 6] : lightColors[depth % 6];
    return (
      <div className="mb-1">
        <div className={`border-2 rounded p-2 ${colorClass}`}>
          <div className="flex items-center justify-between gap-2">
            <div className="font-mono font-bold text-sm">{subnet.network}/{subnet.prefix}</div>
            <div className="flex items-center gap-3 text-xs font-mono">
              <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>{subnet.subnetMask}</span>
              <span>{subnet.network} - {subnet.broadcast}</span>
              <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>({subnet.totalHosts.toLocaleString()} hosts)</span>
            </div>
            <div className="flex gap-1">
              {subnet.prefix < 32 && !subnet.children && (
                <button onClick={() => handleSplit(subnet.id)} className="px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-xs font-semibold">Split</button>
              )}
              {subnet.children && (
                <button onClick={() => handleRecombine(subnet.id)} className="px-2 py-1 bg-orange-600 text-white rounded hover:bg-orange-700 text-xs font-semibold">Recombine</button>
              )}
            </div>
          </div>
        </div>
        {subnet.children && (
          <div className={`ml-6 mt-1 border-l-2 pl-2 ${darkMode ? 'border-gray-600' : 'border-gray-300'}`}>
            {subnet.children.map(child => <SubnetBlock key={child.id} subnet={child} depth={depth + 1} />)}
          </div>
        )}
      </div>
    );
  };

  return (
    <div className={`min-h-screen p-6 transition-colors duration-200 ${darkMode ? 'bg-gray-900' : 'bg-gray-100'}`}>
      <div className="max-w-5xl mx-auto">
        <div className={`rounded-lg shadow-lg p-6 mb-6 transition-colors duration-200 ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
          <div className="flex justify-between items-center mb-6">
            <h1 className={`text-3xl font-bold ${darkMode ? 'text-gray-100' : 'text-gray-800'}`}>Subnet Calculator</h1>
          </div>
          <div className="mb-4">
            <div className="flex gap-2">
              <input
                type="text"
                value={cidrInput}
                onChange={e => setCidrInput(e.target.value)}
                onKeyDown={e => e.key === 'Enter' && handleCalculate()}
                placeholder="e.g., 10.0.0.0/16"
                className={`flex-1 px-4 py-2 border-2 rounded-lg font-mono focus:outline-none focus:border-blue-500 ${darkMode ? 'border-gray-600 bg-gray-700 text-gray-100' : 'border-gray-300 bg-white text-gray-900'}`}
              />
              <button onClick={handleCalculate} className="px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700">Calculate</button>
            </div>
          </div>
          {error && (
            <div className={`flex items-center gap-2 p-3 border rounded-lg mb-4 ${darkMode ? 'bg-red-900 border-red-700 text-red-200' : 'bg-red-50 border-red-300 text-red-700'}`}>
              <span>âš </span><span>{error}</span>
            </div>
          )}
          <div className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>
            <p>Enter a CIDR notation (e.g., 192.168.1.0/24) and click Calculate to begin.</p>
            <p>Click "Split" on any subnet to divide it into two smaller subnets.</p>
          </div>
        </div>
        {rootSubnet && (
          <div className={`rounded-lg shadow-lg p-6 transition-colors duration-200 ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
            <h2 className={`text-xl font-bold mb-4 ${darkMode ? 'text-gray-100' : 'text-gray-800'}`}>Subnet Breakdown</h2>
            <SubnetBlock subnet={rootSubnet} />
          </div>
        )}
      </div>
    </div>
  );
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WIFI QR GENERATOR â€” original artifact, no style changes
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const WiFiQRGenerator = ({ darkMode }) => {
  const [ssid, setSsid] = useState('');
  const [password, setPassword] = useState('');
  const [qrDataUrl, setQrDataUrl] = useState('');

  useEffect(() => {
    if (ssid) { generateQRCode(); } else { setQrDataUrl(''); }
  }, [ssid, password]);

  const generateQRCode = () => {
    const wifiString = `WIFI:T:WPA;S:${ssid};P:${password};;`;
    const container = document.createElement('div');
    container.style.display = 'none';
    document.body.appendChild(container);
    const doCreate = () => {
      try {
        new window.QRCode(container, { text: wifiString, width: 300, height: 300, colorDark: '#000000', colorLight: '#ffffff', correctLevel: window.QRCode.CorrectLevel.H });
        setTimeout(() => {
          const img = container.querySelector('img');
          if (img && img.src) { setQrDataUrl(img.src); }
          else { const c = container.querySelector('canvas'); if (c) setQrDataUrl(c.toDataURL()); }
          if (document.body.contains(container)) document.body.removeChild(container);
        }, 150);
      } catch(e) { if (document.body.contains(container)) document.body.removeChild(container); }
    };
    if (window.QRCode) { doCreate(); }
    else {
      const s = document.createElement('script');
      s.src = 'https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js';
      s.onload = doCreate;
      document.head.appendChild(s);
    }
  };

  const downloadQRCode = () => {
    if (!qrDataUrl) return;
    const a = document.createElement('a');
    a.href = qrDataUrl; a.download = `wifi-${ssid}-qr.png`;
    document.body.appendChild(a); a.click(); document.body.removeChild(a);
  };

  const downloadPDF = () => {
    if (!qrDataUrl) return;
    const html = `<!DOCTYPE html><html><head><style>body{font-family:Arial,sans-serif;text-align:center;padding:40px}h1{color:#333;margin-bottom:10px}.network-name{font-size:24px;font-weight:bold;margin:20px 0}.qr-container{margin:30px 0}.instructions{margin-top:30px;color:#666;font-size:14px;max-width:500px;margin-left:auto;margin-right:auto}</style></head><body><h1>WiFi Network QR Code</h1><div class="network-name">${ssid}</div><div class="qr-container"><img src="${qrDataUrl}" alt="WiFi QR Code" style="max-width:300px;"></div><div class="instructions"><p><strong>How to connect:</strong></p><p>1. Open your phone's camera app</p><p>2. Point it at this QR code</p><p>3. Tap the notification to join the network</p></div></body></html>`;
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const w = window.open(url);
    w.onload = () => { w.print(); URL.revokeObjectURL(url); };
  };

  return (
    <div className={`min-h-screen p-6 transition-colors ${darkMode ? 'bg-gradient-to-br from-gray-900 to-gray-800' : 'bg-gradient-to-br from-blue-50 to-indigo-100'}`}>
      <div className="max-w-2xl mx-auto">
        <div className={`rounded-2xl shadow-xl p-8 transition-colors ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
          <div className="flex items-center mb-8">
            <svg className={`w-10 h-10 mr-3 ${darkMode ? 'text-indigo-400' : 'text-indigo-600'}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0" />
            </svg>
            <h1 className={`text-3xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>WiFi QR Code Generator</h1>
          </div>

          <div className="space-y-6">
            <div>
              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Network Name (SSID)</label>
              <input type="text" value={ssid} onChange={e => setSsid(e.target.value)} placeholder="Enter WiFi network name"
                className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition ${darkMode ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' : 'bg-white border-gray-300 text-gray-900'}`} />
            </div>
            <div>
              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Password</label>
              <input type="text" value={password} onChange={e => setPassword(e.target.value)} placeholder="Enter WiFi password (optional for open networks)"
                className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition ${darkMode ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' : 'bg-white border-gray-300 text-gray-900'}`} />
            </div>
          </div>

          {qrDataUrl && (
            <div className="mt-8">
              <div className={`rounded-xl p-6 text-center ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>
                <img src={qrDataUrl} alt="WiFi QR Code" className="mx-auto mb-6 rounded-lg shadow-md" style={{ maxWidth: '300px' }} />
                <div className="flex gap-3 justify-center flex-wrap">
                  <button onClick={downloadQRCode} className="flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition font-medium">
                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
                    Download PNG
                  </button>
                  <button onClick={downloadPDF} className="flex items-center gap-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-medium">
                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                    Save as PDF
                  </button>
                </div>
              </div>
              <div className={`mt-6 p-4 rounded-lg ${darkMode ? 'bg-blue-900/30' : 'bg-blue-50'}`}>
                <p className={`text-sm text-center ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                  <strong>How to use:</strong> Scan this QR code with your phone's camera to automatically connect to the WiFi network. No need to type the password!
                </p>
              </div>
            </div>
          )}

          {!qrDataUrl && ssid === '' && (
            <div className={`text-center py-12 ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>
              <svg className="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0" />
              </svg>
              <p>Enter a network name to generate your QR code</p>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UPTIME NINES CALCULATOR â€” original artifact, no style changes
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const PRESETS = [99, 99.9, 99.95, 99.99, 99.995, 99.999, 99.9999, 99.99999];

function calcNines(pct) {
  if (pct <= 0) return 0;
  if (pct >= 100) return Infinity;
  return -Math.log10(1 - pct / 100);
}
function formatNines(n) {
  if (!isFinite(n) || n <= 0) return "â€”";
  return (Math.floor(n * 10) / 10).toFixed(1);
}
function ninesLabel(n) {
  if (!isFinite(n) || n <= 0) return "â€”";
  const f = Math.round(n);
  const labels = ["one","two","three","four","five","six","seven"];
  const word = labels[f - 1] || `${f}`;
  return `${word} nine${f !== 1 ? "s" : ""}`;
}
function formatDuration(minutes) {
  const totalSecs = Math.round(minutes * 60);
  if (totalSecs === 0) return "0s";
  const h = Math.floor(totalSecs / 3600);
  const m = Math.floor((totalSecs % 3600) / 60);
  const s = totalSecs % 60;
  return [h ? `${h}h` : null, m ? `${m}m` : null, s ? `${s}s` : null].filter(Boolean).join(" ");
}
function calcDowntime(pct) {
  const unavail = 1 - pct / 100;
  return { year: unavail * 525960, month: unavail * 43800, week: unavail * 10080, day: unavail * 1440 };
}
function downtimeToUptime(mins, period) {
  const totalMins = { year: 525960, month: 43800, week: 10080, day: 1440 };
  return Math.max(0, Math.min(100, (1 - mins / totalMins[period]) * 100));
}

const UptimeCalculator = () => {
  const [mode, setMode] = useState("uptime");
  const [uptime, setUptime] = useState("99.9");
  const [dtValue, setDtValue] = useState("8");
  const [dtUnit, setDtUnit] = useState("hour");
  const [dtPeriod, setDtPeriod] = useState("year");

  const pct = parseFloat(uptime);
  let displayPct = pct;
  if (mode === "downtime") {
    const dtMins = parseFloat(dtValue) * (dtUnit === "hour" ? 60 : dtUnit === "day" ? 1440 : 1);
    displayPct = downtimeToUptime(isNaN(dtMins) ? 0 : dtMins, dtPeriod);
  }
  const nines = calcNines(displayPct);
  const dt = calcDowntime(displayPct);
  const validDisplay = !isNaN(displayPct) && displayPct >= 0 && displayPct <= 100;
  const periods = [
    { label: "Per Year", key: "year" }, { label: "Per Month", key: "month" },
    { label: "Per Week", key: "week" }, { label: "Per Day", key: "day" },
  ];

  return (
    <div style={{ minHeight: "100vh", background: "#0f1117", color: "#e2e8f0", fontFamily: "system-ui, sans-serif", padding: "2rem 1rem" }}>
      <div style={{ maxWidth: 600, margin: "0 auto" }}>
        <h1 style={{ textAlign: "center", fontSize: "1.6rem", fontWeight: 700, marginBottom: "0.25rem", color: "#f8fafc" }}>Uptime Nines Calculator</h1>
        <p style={{ textAlign: "center", color: "#94a3b8", marginBottom: "2rem", fontSize: "0.9rem" }}>Calculate SLA tiers and maximum allowable downtime</p>

        <div style={{ display: "flex", background: "#1e2230", borderRadius: 10, padding: 4, marginBottom: "1.5rem" }}>
          {["uptime", "downtime"].map(m => (
            <button key={m} onClick={() => setMode(m)} style={{ flex: 1, padding: "0.6rem", borderRadius: 8, border: "none", cursor: "pointer", background: mode === m ? "#3b82f6" : "transparent", color: mode === m ? "#fff" : "#94a3b8", fontWeight: 600, fontSize: "0.9rem", transition: "all 0.2s" }}>
              {m === "uptime" ? "â†‘ Uptime â†’ Downtime" : "â†“ Downtime â†’ Uptime"}
            </button>
          ))}
        </div>

        <div style={{ background: "#1e2230", borderRadius: 12, padding: "1.5rem", marginBottom: "1.5rem" }}>
          {mode === "uptime" ? (
            <>
              <label style={{ display: "block", color: "#94a3b8", fontSize: "0.85rem", marginBottom: "0.5rem" }}>Target Uptime %</label>
              <input type="number" min="0" max="100" step="0.001" value={uptime} onChange={e => setUptime(e.target.value)}
                style={{ width: "100%", background: "#0f1117", border: "1px solid #334155", borderRadius: 8, padding: "0.75rem 1rem", color: "#f8fafc", fontSize: "1.2rem", boxSizing: "border-box" }} />
              <div style={{ display: "flex", flexWrap: "wrap", gap: "0.5rem", marginTop: "1rem" }}>
                {PRESETS.map(p => (
                  <button key={p} onClick={() => setUptime(String(p))} style={{ padding: "0.3rem 0.75rem", borderRadius: 6, border: "1px solid #334155", background: parseFloat(uptime) === p ? "#3b82f6" : "#0f1117", color: parseFloat(uptime) === p ? "#fff" : "#94a3b8", cursor: "pointer", fontSize: "0.8rem" }}>
                    {p}%
                  </button>
                ))}
              </div>
            </>
          ) : (
            <>
              <label style={{ display: "block", color: "#94a3b8", fontSize: "0.85rem", marginBottom: "0.5rem" }}>Acceptable Downtime</label>
              <div style={{ display: "flex", gap: "0.75rem" }}>
                <input type="number" min="0" value={dtValue} onChange={e => setDtValue(e.target.value)}
                  style={{ flex: 2, background: "#0f1117", border: "1px solid #334155", borderRadius: 8, padding: "0.75rem 1rem", color: "#f8fafc", fontSize: "1.1rem" }} />
                <select value={dtUnit} onChange={e => setDtUnit(e.target.value)} style={{ flex: 1, background: "#0f1117", border: "1px solid #334155", borderRadius: 8, padding: "0.75rem", color: "#f8fafc", fontSize: "0.9rem" }}>
                  <option value="minute">Minutes</option>
                  <option value="hour">Hours</option>
                  <option value="day">Days</option>
                </select>
                <select value={dtPeriod} onChange={e => setDtPeriod(e.target.value)} style={{ flex: 1, background: "#0f1117", border: "1px solid #334155", borderRadius: 8, padding: "0.75rem", color: "#f8fafc", fontSize: "0.9rem" }}>
                  <option value="year">Per Year</option>
                  <option value="month">Per Month</option>
                  <option value="week">Per Week</option>
                  <option value="day">Per Day</option>
                </select>
              </div>
            </>
          )}
        </div>

        {validDisplay && (
          <>
            <div style={{ background: "linear-gradient(135deg, #1e3a5f 0%, #1e2230 100%)", borderRadius: 12, padding: "1.75rem", marginBottom: "1.5rem", textAlign: "center", border: "1px solid #2d4a6e" }}>
              <div style={{ fontSize: "3.5rem", fontWeight: 800, color: "#60a5fa", lineHeight: 1 }}>{formatNines(nines)}</div>
              <div style={{ color: "#93c5fd", fontSize: "0.95rem", marginTop: "0.25rem", marginBottom: "1rem" }}>nines ({ninesLabel(nines)})</div>
              <div style={{ fontSize: "2rem", fontWeight: 700, color: "#f8fafc" }}>{displayPct.toFixed(Math.max(3, (displayPct.toString().split(".")[1] || "").length))}%</div>
              <div style={{ color: "#94a3b8", fontSize: "0.85rem" }}>uptime</div>
            </div>
            <div style={{ background: "#1e2230", borderRadius: 12, padding: "1.25rem", marginBottom: "1rem" }}>
              <h2 style={{ color: "#94a3b8", fontSize: "0.85rem", fontWeight: 600, textTransform: "uppercase", letterSpacing: "0.05em", marginBottom: "1rem", marginTop: 0 }}>Max Allowable Downtime</h2>
              <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: "0.75rem" }}>
                {periods.map(({ label, key }) => (
                  <div key={key} style={{ background: "#0f1117", borderRadius: 8, padding: "1rem", textAlign: "center" }}>
                    <div style={{ fontSize: "1.4rem", fontWeight: 700, color: "#34d399" }}>{formatDuration(dt[key])}</div>
                    <div style={{ color: "#64748b", fontSize: "0.8rem", marginTop: "0.2rem" }}>{label}</div>
                  </div>
                ))}
              </div>
            </div>
            <div style={{ background: "#1e2230", borderRadius: 12, padding: "1.25rem" }}>
              <h2 style={{ color: "#94a3b8", fontSize: "0.85rem", fontWeight: 600, textTransform: "uppercase", letterSpacing: "0.05em", marginBottom: "1rem", marginTop: 0 }}>SLA Reference</h2>
              <div style={{ display: "flex", flexDirection: "column", gap: "0.4rem" }}>
                {PRESETS.map(p => {
                  const n = calcNines(p);
                  const isActive = Math.abs(displayPct - p) < 0.0001;
                  return (
                    <div key={p} style={{ display: "flex", justifyContent: "space-between", alignItems: "center", padding: "0.5rem 0.75rem", borderRadius: 6, background: isActive ? "#1e3a5f" : "transparent", border: isActive ? "1px solid #2d4a6e" : "1px solid transparent" }}>
                      <span style={{ color: isActive ? "#60a5fa" : "#94a3b8", fontWeight: isActive ? 700 : 400, fontSize: "0.9rem" }}>{p}%</span>
                      <span style={{ color: "#64748b", fontSize: "0.8rem" }}>{ninesLabel(n)}</span>
                      <span style={{ color: isActive ? "#34d399" : "#64748b", fontSize: "0.85rem" }}>{formatDuration(calcDowntime(p).year)}/yr</span>
                    </div>
                  );
                })}
              </div>
            </div>
          </>
        )}
      </div>
    </div>
  );
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NETWORK LATENCY TESTER â€” converted from original HTML
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const NET_PRESETS = [
  { label: "AWS EU West 2 (London)",       host: "ec2.eu-west-2.amazonaws.com" },
  { label: "AWS EU West 1 (Ireland)",      host: "ec2.eu-west-1.amazonaws.com" },
  { label: "AWS EU Central 1 (Frankfurt)", host: "ec2.eu-central-1.amazonaws.com" },
  { label: "AWS US East 1 (Virginia)",     host: "ec2.us-east-1.amazonaws.com" },
  { label: "AWS US West 2 (Oregon)",       host: "ec2.us-west-2.amazonaws.com" },
  { label: "AWS AP SE 1 (Singapore)",      host: "ec2.ap-southeast-1.amazonaws.com" },
  { label: "AWS AP SE 2 (Sydney)",         host: "ec2.ap-southeast-2.amazonaws.com" },
  { label: "AWS AP NE 1 (Tokyo)",          host: "ec2.ap-northeast-1.amazonaws.com" },
  { label: "Cloudflare DNS",               host: "1.1.1.1" },
  { label: "Google DNS",                   host: "8.8.8.8" },
  { label: "Google",                       host: "google.com" },
];

const DEFAULT_ENDPOINTS = [
  { label: "AWS EU West 2 (London)",   host: "ec2.eu-west-2.amazonaws.com" },
  { label: "AWS EU West 1 (Ireland)",  host: "ec2.eu-west-1.amazonaws.com" },
  { label: "AWS US East 1 (Virginia)", host: "ec2.us-east-1.amazonaws.com" },
];

function wsPing(host, timeout = 4000) {
  return new Promise(resolve => {
    const t0 = performance.now();
    let done = false;
    const finish = () => { if (!done) { done = true; resolve(Math.round(performance.now() - t0)); } };
    const timer = setTimeout(() => { if (!done) { done = true; resolve(null); } try { ws.close(); } catch {} }, timeout);
    let ws;
    try {
      ws = new WebSocket(`wss://${host}`);
      ws.onopen  = () => { clearTimeout(timer); finish(); try { ws.close(); } catch {} };
      ws.onerror = () => { clearTimeout(timer); finish(); };
    } catch { clearTimeout(timer); resolve(null); }
  });
}

function imgPingNet(host, timeout = 4000) {
  return new Promise(resolve => {
    const t0 = performance.now();
    const img = new Image();
    const done = () => resolve(Math.round(performance.now() - t0));
    const timer = setTimeout(() => { img.src = ""; resolve(null); }, timeout);
    img.onload  = () => { clearTimeout(timer); done(); };
    img.onerror = () => { clearTimeout(timer); done(); };
    img.src = `https://${host}/ping?_=${Date.now()}${Math.random().toString(36).slice(2)}`;
  });
}

async function netPing(host) {
  const ws = await wsPing(host, 4000);
  if (ws !== null && ws > 2) return ws;
  return imgPingNet(host, 4000);
}

const netDelay = ms => new Promise(r => setTimeout(r, ms));

async function runNetPings(host, runs = 4) {
  const arr = [];
  for (let i = 0; i < runs; i++) {
    if (i > 0) await netDelay(200);
    const ms = await netPing(host);
    if (ms !== null && ms > 1) arr.push(ms);
  }
  if (!arr.length) return null;
  arr.sort((a, b) => a - b);
  const trimmed = arr.length > 2 ? arr.slice(1, -1) : arr;
  return Math.round(trimmed.reduce((a, b) => a + b) / trimmed.length);
}

function netLatColor(ms) {
  if (ms === null) return "#ef4444";
  if (ms < 50)  return "#22c55e";
  if (ms < 100) return "#84cc16";
  if (ms < 200) return "#f59e0b";
  if (ms < 400) return "#f97316";
  return "#ef4444";
}
function netLatLabel(ms) {
  if (ms === null) return "Timeout";
  if (ms < 50)  return "Excellent";
  if (ms < 100) return "Good";
  if (ms < 200) return "Fair";
  if (ms < 400) return "Poor";
  return "Bad";
}

let netIdSeq = 0;
const netMkId = () => ++netIdSeq;

const NetworkLatencyTester = () => {
  const [endpoints, setEndpoints] = useState(() =>
    DEFAULT_ENDPOINTS.map(p => ({ id: netMkId(), host: p.host, label: p.label }))
  );
  const [results, setResults]         = useState({});
  const [running, setRunning]         = useState(false);
  const [progress, setProgress]       = useState(0);
  const [progText, setProgText]       = useState('');
  const [phase, setPhase]             = useState('idle'); // idle | running | done
  const [best, setBest]               = useState(null);
  const [newHost, setNewHost]         = useState('');
  const [newLabel, setNewLabel]       = useState('');
  const [presetsOpen, setPresetsOpen] = useState(false);
  const abortRef                      = useRef(false);
  const presetsRef                    = useRef(null);

  useEffect(() => {
    const handler = (e) => {
      if (presetsRef.current && !presetsRef.current.contains(e.target)) {
        setPresetsOpen(false);
      }
    };
    document.addEventListener('mousedown', handler);
    return () => document.removeEventListener('mousedown', handler);
  }, []);

  const addEndpoint = () => {
    const host = newHost.trim();
    if (!host) return;
    const label = newLabel.trim() || host;
    setEndpoints(prev => [...prev, { id: netMkId(), host, label }]);
    setNewHost(''); setNewLabel('');
  };

  const addPreset = (p) => {
    setEndpoints(prev => [...prev, { id: netMkId(), host: p.host, label: p.label }]);
    setPresetsOpen(false);
  };

  const removeEndpoint = (id) => {
    if (running) return;
    setEndpoints(prev => prev.filter(e => e.id !== id));
    setResults(prev => { const n = {...prev}; delete n[id]; return n; });
  };

  const runAll = async () => {
    if (running || !endpoints.length) return;
    abortRef.current = false;
    setRunning(true);
    setPhase('running');
    setResults({});
    setBest(null);
    setProgress(0);
    setProgText('Startingâ€¦');

    const eps = [...endpoints];
    const newResults = {};

    for (let i = 0; i < eps.length; i++) {
      if (abortRef.current) break;
      const ep = eps[i];
      setProgText(`Testing: ${ep.label}`);
      setProgress(Math.round((i / eps.length) * 100));
      setResults(prev => ({ ...prev, [ep.id]: { testing: true, ms: null } }));
      const ms = await runNetPings(ep.host);
      newResults[ep.id] = { testing: false, ms };
      setResults(prev => ({ ...prev, [ep.id]: { testing: false, ms } }));
      setProgress(Math.round(((i + 1) / eps.length) * 100));
      await netDelay(30);
    }

    // Find best
    const done = eps.filter(e => newResults[e.id]?.ms !== null && newResults[e.id]?.ms !== undefined);
    if (done.length) {
      done.sort((a, b) => newResults[a.id].ms - newResults[b.id].ms);
      setBest({ ep: done[0], ms: newResults[done[0].id].ms });
    }

    setRunning(false);
    setPhase('done');
    setProgress(100);
    setProgText('Complete');
  };

  const stopTest = () => { abortRef.current = true; };

  const allMs = Object.values(results).map(r => r.ms).filter(v => v !== null);
  const maxMs = allMs.length ? Math.max(...allMs) : 500;

  const s = { // inline style shortcuts
    card:    { background: "#0f172a", border: "1px solid #1e293b", borderRadius: 12, overflow: "hidden", marginBottom: 16 },
    hdr:     { padding: "12px 16px", borderBottom: "1px solid #1e293b", display: "flex", alignItems: "center", justifyContent: "space-between" },
    lbl:     { fontSize: 12, fontWeight: 700, color: "#64748b", textTransform: "uppercase", letterSpacing: ".05em" },
    inp:     { background: "#1e293b", border: "1px solid #334155", borderRadius: 8, padding: "8px 12px", color: "#e2e8f0", fontSize: 13, outline: "none" },
    btnAdd:  { border: "none", borderRadius: 8, padding: "8px 18px", fontWeight: 700, fontSize: 13, cursor: "pointer", background: "#1e40af", color: "#fff" },
    btnRun:  { border: "none", borderRadius: 8, padding: "8px 20px", fontWeight: 700, fontSize: 13, cursor: running ? "not-allowed" : "pointer", background: running ? "#1e293b" : "linear-gradient(135deg,#f59e0b,#ff9900)", color: running ? "#64748b" : "#000" },
    btnStop: { border: "1px solid #ef444433", borderRadius: 8, padding: "8px 16px", fontWeight: 700, fontSize: 13, cursor: "pointer", background: "#450a0a", color: "#ef4444" },
    btnPre:  { border: "1px solid #334155", borderRadius: 8, padding: "8px 14px", fontWeight: 700, fontSize: 13, cursor: "pointer", background: "#1e293b", color: "#94a3b8", position: "relative" },
  };

  return (
    <div style={{ minHeight: "100vh", background: "#0a0f1a", color: "#e2e8f0", fontFamily: "system-ui, sans-serif", padding: "24px 16px" }}>
      <style>{`@keyframes netpulse { 0%,100%{opacity:1} 50%{opacity:.3} }`}</style>
      <div style={{ maxWidth: 760, margin: "0 auto" }}>

        <h1 style={{ fontSize: 24, fontWeight: 800, marginBottom: 6 }}>ğŸŒ Network Latency Tester</h1>
        <p style={{ color: "#475569", fontSize: 13, marginBottom: 24 }}>Test TCP latency to any hostname or IP Â· Uses WebSocket handshake timing Â· Port 443</p>

        {/* Add form */}
        <div style={{ ...s.card, overflow: "visible" }}>
          <div style={s.hdr}><span style={s.lbl}>Add Endpoint</span></div>
          <div style={{ padding: 16, display: "flex", gap: 8, flexWrap: "wrap" }}>
            <input style={{ ...s.inp, flex: "2 1 180px" }} value={newHost} onChange={e => setNewHost(e.target.value)}
              placeholder="hostname or IP" onKeyDown={e => e.key === 'Enter' && addEndpoint()} />
            <input style={{ ...s.inp, flex: "2 1 140px" }} value={newLabel} onChange={e => setNewLabel(e.target.value)}
              placeholder="Label (optional)" onKeyDown={e => e.key === 'Enter' && addEndpoint()} />
            <button style={s.btnAdd} onClick={addEndpoint}>+ Add</button>
            <div style={{ position: "relative" }} ref={presetsRef}>
              <button style={s.btnPre} onClick={() => setPresetsOpen(o => !o)}>Presets â–¾</button>
              {presetsOpen && (
                <div style={{ position: "absolute", top: "calc(100% + 6px)", left: 0, background: "#1e293b", border: "1px solid #334155", borderRadius: 10, minWidth: 280, zIndex: 9999, maxHeight: 320, overflowY: "auto" }}>
                  {NET_PRESETS.map(p => (
                    <button key={p.host} onMouseDown={() => addPreset(p)} style={{ display: "block", width: "100%", textAlign: "left", background: "none", border: "none", borderBottom: "1px solid #334155", padding: "10px 14px", color: "#e2e8f0", fontSize: 13, cursor: "pointer" }}
                      onMouseEnter={e => e.currentTarget.style.background = "#334155"}
                      onMouseLeave={e => e.currentTarget.style.background = "none"}>
                      <strong>{p.label}</strong> <span style={{ color: "#475569", fontSize: 11 }}>{p.host}</span>
                    </button>
                  ))}
                </div>
              )}
            </div>
          </div>
        </div>

        {/* Endpoint list */}
        <div style={s.card}>
          <div style={s.hdr}>
            <span style={s.lbl}>{endpoints.length} Endpoint{endpoints.length !== 1 ? 's' : ''}</span>
            <div style={{ display: "flex", gap: 8 }}>
              {running && <button style={s.btnStop} onClick={stopTest}>â–  Stop</button>}
              <button style={s.btnRun} onClick={runAll} disabled={running}>
                {running ? "Runningâ€¦" : phase === 'done' ? "â–¶ Run Again" : "â–¶ Run Test"}
              </button>
            </div>
          </div>

          {/* Progress */}
          {(phase === 'running' || phase === 'done') && (
            <div style={{ padding: "10px 16px", borderBottom: "1px solid #1e293b", background: "#0a0f1a" }}>
              <div style={{ display: "flex", justifyContent: "space-between", marginBottom: 6, fontSize: 12 }}>
                <span style={{ color: "#f59e0b", fontWeight: 600, display: "flex", alignItems: "center", gap: 6 }}>
                  <span style={{ width: 8, height: 8, borderRadius: "50%", background: phase === 'done' ? "#22c55e" : "#f59e0b", display: "inline-block", animation: running ? "netpulse 1s infinite" : "none" }} />
                  {phase === 'done' ? "âœ“ Complete" : progText}
                </span>
                <span style={{ color: "#64748b" }}>{progress}%</span>
              </div>
              <div style={{ background: "#1e293b", borderRadius: 4, height: 4, overflow: "hidden" }}>
                <div style={{ width: `${progress}%`, height: "100%", background: phase === 'done' ? "#22c55e" : "linear-gradient(90deg,#f59e0b,#ff9900)", borderRadius: 4, transition: "width .4s" }} />
              </div>
            </div>
          )}

          {/* Rows */}
          {endpoints.length === 0 ? (
            <div style={{ textAlign: "center", color: "#475569", padding: "40px 24px", fontSize: 14 }}>
              <div style={{ fontSize: 40, marginBottom: 10 }}>ğŸ”Œ</div>
              Add an endpoint above or pick from Presets.
            </div>
          ) : endpoints.map((ep, idx) => {
            const r = results[ep.id];
            const isTesting = r?.testing;
            const ms = r?.ms ?? null;
            const isDone = r && !isTesting;
            const c = netLatColor(ms);
            const pct = ms !== null ? Math.min((ms / Math.max(maxMs, 1)) * 100, 100) : 0;
            const dotColor = isTesting ? "#f59e0b" : isDone ? (ms !== null ? "#22c55e" : "#ef4444") : "#334155";

            return (
              <div key={ep.id} style={{ display: "flex", alignItems: "center", gap: 12, padding: "12px 16px", borderTop: idx === 0 ? "none" : "1px solid #1e293b", background: isTesting ? "#0f172a" : "transparent" }}>
                <span style={{ width: 8, height: 8, borderRadius: "50%", background: dotColor, flexShrink: 0, boxShadow: `0 0 0 3px ${dotColor}33`, animation: isTesting ? "netpulse 1s infinite" : "none", display: "inline-block" }} />
                <div style={{ flex: 1, minWidth: 0 }}>
                  <div style={{ fontWeight: 600, fontSize: 13 }}>{ep.label}</div>
                  <div style={{ fontSize: 11, color: "#475569" }}>{ep.host}</div>
                </div>
                <div style={{ width: 220 }}>
                  {!r && <span style={{ fontSize: 12, color: "#334155" }}>â€”</span>}
                  {isTesting && <span style={{ fontSize: 12, color: "#f59e0b", animation: "netpulse 1s infinite" }}>Pingingâ€¦</span>}
                  {isDone && (
                    <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
                      <div style={{ flex: 1, height: 6, background: "#1e293b", borderRadius: 3, overflow: "hidden" }}>
                        <div style={{ width: `${pct}%`, height: "100%", background: c, borderRadius: 3, transition: "width .4s" }} />
                      </div>
                      <span style={{ fontSize: 12, fontWeight: 700, width: 55, textAlign: "right", color: c }}>{ms !== null ? `${ms}ms` : "â€”"}</span>
                    </div>
                  )}
                </div>
                {isDone && <span style={{ fontSize: 11, fontWeight: 700, width: 60, textAlign: "right", color: c }}>{netLatLabel(ms)}</span>}
                {!isDone && <span style={{ width: 60 }} />}
                <button onClick={() => removeEndpoint(ep.id)} disabled={running}
                  style={{ background: "none", border: "none", color: "#334155", cursor: running ? "not-allowed" : "pointer", fontSize: 16, padding: "0 4px", lineHeight: 1 }}
                  onMouseEnter={e => { if (!running) e.currentTarget.style.color = "#ef4444"; }}
                  onMouseLeave={e => e.currentTarget.style.color = "#334155"}>âœ•</button>
              </div>
            );
          })}
        </div>

        {/* Best banner */}
        {best && (
          <div style={{ background: "#052e16", border: "1px solid #22c55e44", borderRadius: 10, padding: "12px 18px", marginBottom: 16, display: "flex", alignItems: "center", gap: 12, fontSize: 14 }}>
            ğŸ† <span><strong style={{ color: "#22c55e" }}>Lowest latency:</strong> {best.ep.label} â€” <strong style={{ color: "#22c55e" }}>{best.ms}ms</strong></span>
          </div>
        )}

        {/* Legend */}
        {phase === 'done' && (
          <div style={{ display: "flex", flexWrap: "wrap", gap: 14, fontSize: 12, color: "#64748b", alignItems: "center", marginBottom: 16 }}>
            <span style={{ fontWeight: 700, color: "#94a3b8" }}>Latency:</span>
            {[["#22c55e","<50ms Excellent"],["#84cc16","<100ms Good"],["#f59e0b","<200ms Fair"],["#f97316","<400ms Poor"],["#ef4444",">400ms Bad"]].map(([c,l]) => (
              <span key={l} style={{ display: "flex", alignItems: "center", gap: 5 }}>
                <span style={{ width: 8, height: 8, borderRadius: "50%", background: c, display: "inline-block" }} />
                {l}
              </span>
            ))}
          </div>
        )}

        <p style={{ textAlign: "center", color: "#1e293b", fontSize: 11, marginTop: 8 }}>Uses WebSocket handshake timing Â· Results are indicative only</p>
      </div>
    </div>
  );
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOME PAGE â€” tool tiles
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TOOLS = [
  {
    id: 'subnet',
    label: 'Subnet Calculator',
    icon: 'ğŸŒ',
    desc: 'Calculate network ranges, split CIDRs and visualise subnet hierarchies.',
    badge: 'Networking',
  },
  {
    id: 'wifi',
    label: 'WiFi QR Generator',
    icon: 'ğŸ“¶',
    desc: 'Generate a scannable QR code for any WiFi network. Download as PNG or PDF.',
    badge: 'Wireless',
  },
  {
    id: 'uptime',
    label: 'Uptime Nines Calculator',
    icon: 'ğŸ“ˆ',
    desc: 'Calculate SLA tiers, nines of availability, and maximum allowable downtime.',
    badge: 'SLA',
  },
  {
    id: 'latency',
    label: 'Network Latency Tester',
    icon: 'ğŸŒ',
    desc: 'Test TCP latency to any hostname or IP via WebSocket handshake timing.',
    badge: 'Networking',
  },
];

const SOFTWARE_LINKS = [
  { label: 'Useful Software', links: [
    { icon: 'ğŸ¦…', title: 'Tailscale', desc: 'Zero-config VPN & mesh networking', url: 'https://tailscale.com' },
    { icon: 'ğŸ”’', title: 'Proton',    desc: 'Encrypted email, VPN & cloud storage', url: 'https://proton.me' },
  ]},
];

const HomePage = ({ onSelect, darkMode }) => (
  <div className={`home-page ${darkMode ? 'dark' : 'light'}`}>
    <div className="home-heading">Tech Tools Hub</div>
    <div className="home-sub">Select a tool to get started.</div>
    <div className="tiles-grid">
      {TOOLS.map(t => (
        <div key={t.id} className="tool-tile" onClick={() => onSelect(t.id)}>
          <div className="tool-tile-icon">{t.icon}</div>
          <div className="tool-tile-title">{t.label}</div>
          <div className="tool-tile-desc">{t.desc}</div>
          <span className="tool-tile-badge">{t.badge}</span>
        </div>
      ))}
    </div>

    {SOFTWARE_LINKS.map(group => (
      <div key={group.label}>
        <div className="section-divider">
          <div className="section-divider-line" />
          <div className="section-divider-label">{group.label}</div>
          <div className="section-divider-line" />
        </div>
        <div className="links-grid">
          {group.links.map(link => (
            <a key={link.title} href={link.url} target="_blank" rel="noopener noreferrer" className="link-card">
              <div className="link-card-icon">{link.icon}</div>
              <div className="link-card-body">
                <div className="link-card-title">{link.title}</div>
                <div className="link-card-desc">{link.desc}</div>
              </div>
            </a>
          ))}
        </div>
      </div>
    ))}
  </div>
);

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ENTRY / SPLASH PAGE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const EntryPage = ({ onEnter }) => {
  const canvasRef = useRef(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    const ctx = canvas.getContext('2d');
    let animId;

    const setSize = () => {
      canvas.width  = canvas.offsetWidth;
      canvas.height = canvas.offsetHeight;
    };
    setSize();
    window.addEventListener('resize', setSize);

    const d2r = d => d * Math.PI / 180;
    const arcPath = (r, s, e) => ctx.arc(0, 0, r, d2r(s - 90), d2r(e - 90));

    // Each ring: fraction of base radius, rotation speed (rad/s), clockwise,
    // arc segments [startDeg, endDeg], tick count, major-tick interval, node degrees
    const RINGS = [
      { f: 0.30, spd: 0.20,  cw: true,  arcs: [[0,300]],                    ticks: 24, maj: 6,  nodes: [50, 200] },
      { f: 0.44, spd: -0.13, cw: false, arcs: [[20,170],[200,350]],          ticks: 32, maj: 8,  nodes: [100, 260] },
      { f: 0.58, spd: 0.16,  cw: true,  arcs: [[0,120],[150,310],[340,360]], ticks: 48, maj: 12, nodes: [60, 230, 315] },
      { f: 0.72, spd: -0.09, cw: false, arcs: [[30,200],[230,360]],          ticks: 60, maj: 15, nodes: [115, 295] },
      { f: 0.90, spd: 0.06,  cw: true,  arcs: [[0,80],[110,240],[270,360]],  ticks: 72, maj: 18, nodes: [] },
    ];

    const draw = ts => {
      const W = canvas.offsetWidth, H = canvas.offsetHeight;
      if (canvas.width !== W || canvas.height !== H) setSize();
      const w = canvas.width, h = canvas.height;
      const cx = w / 2, cy = h / 2;
      const base = Math.min(w, h) * 0.44;
      ctx.clearRect(0, 0, w, h);
      const t = ts * 0.001;

      RINGS.forEach(ring => {
        const r   = base * ring.f;
        const rot = t * ring.spd * (ring.cw ? 1 : -1);
        ctx.save();
        ctx.translate(cx, cy);
        ctx.rotate(rot);

        // Soft glow behind arc
        ring.arcs.forEach(([s, e]) => {
          ctx.beginPath(); arcPath(r, s, e);
          ctx.strokeStyle = 'rgba(56,189,248,0.10)';
          ctx.lineWidth = 5;
          ctx.stroke();
        });
        // Crisp arc line
        ring.arcs.forEach(([s, e]) => {
          ctx.beginPath(); arcPath(r, s, e);
          ctx.strokeStyle = 'rgba(56,189,248,0.55)';
          ctx.lineWidth = 0.8;
          ctx.stroke();
        });

        // Tick marks around full ring
        for (let i = 0; i < ring.ticks; i++) {
          const a   = (i / ring.ticks) * Math.PI * 2 - Math.PI / 2;
          const big = i % ring.maj === 0;
          const ext = big ? 7 : 4;
          ctx.beginPath();
          ctx.moveTo(Math.cos(a) * (r - ext), Math.sin(a) * (r - ext));
          ctx.lineTo(Math.cos(a) * (r + ext), Math.sin(a) * (r + ext));
          ctx.strokeStyle = big ? 'rgba(56,189,248,0.45)' : 'rgba(56,189,248,0.18)';
          ctx.lineWidth   = big ? 0.8 : 0.5;
          ctx.stroke();
        }

        // Node dots with glow
        ring.nodes.forEach(deg => {
          const a = d2r(deg - 90);
          const nx = Math.cos(a) * r, ny = Math.sin(a) * r;
          const g = ctx.createRadialGradient(nx, ny, 0, nx, ny, 8);
          g.addColorStop(0, 'rgba(56,189,248,0.7)');
          g.addColorStop(1, 'rgba(56,189,248,0)');
          ctx.beginPath(); ctx.arc(nx, ny, 8, 0, Math.PI * 2);
          ctx.fillStyle = g; ctx.fill();
          ctx.beginPath(); ctx.arc(nx, ny, 2, 0, Math.PI * 2);
          ctx.fillStyle = 'rgba(56,189,248,1)'; ctx.fill();
        });

        ctx.restore();
      });

      // Pulsing centre glow
      const pulse = 0.6 + 0.4 * Math.sin(t * 1.8);
      const pg = ctx.createRadialGradient(cx, cy, 0, cx, cy, 28 * pulse);
      pg.addColorStop(0, 'rgba(56,189,248,0.35)');
      pg.addColorStop(1, 'rgba(56,189,248,0)');
      ctx.beginPath(); ctx.arc(cx, cy, 28 * pulse, 0, Math.PI * 2);
      ctx.fillStyle = pg; ctx.fill();

      // Centre dot
      ctx.beginPath(); ctx.arc(cx, cy, 2.5 + pulse, 0, Math.PI * 2);
      ctx.fillStyle = '#38bdf8'; ctx.fill();

      // Cross-hair lines from centre
      [0, 1, 2, 3].forEach(i => {
        const a = i * Math.PI / 2;
        ctx.beginPath();
        ctx.moveTo(cx + Math.cos(a) * 5,  cy + Math.sin(a) * 5);
        ctx.lineTo(cx + Math.cos(a) * 14, cy + Math.sin(a) * 14);
        ctx.strokeStyle = 'rgba(56,189,248,0.55)';
        ctx.lineWidth = 1;
        ctx.stroke();
      });

      animId = requestAnimationFrame(draw);
    };

    animId = requestAnimationFrame(draw);
    return () => {
      cancelAnimationFrame(animId);
      window.removeEventListener('resize', setSize);
    };
  }, []);

  return (
    <div className="entry-page">
      <canvas ref={canvasRef} className="entry-canvas" />
      <div className="entry-content">
        <div className="entry-title">Tech<span>Tools</span></div>
        <div className="entry-sub">A collection of networking utilities</div>
        <button className="entry-btn" onClick={onEnter}>Click to Enter</button>
      </div>
    </div>
  );
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHELL
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function App() {
  const [entered, setEntered] = useState(false);
  const [active, setActive] = useState('home');
  const [darkMode, setDarkMode] = useState(false);

  if (!entered) {
    return <EntryPage onEnter={() => setEntered(true)} />;
  }

  return (
    <>
      <nav className="hub-nav">
        <div className="hub-brand" onClick={() => setActive('home')}>Tech<span>Tools</span></div>
        <button className="dark-toggle" onClick={() => setDarkMode(d => !d)}>
          {darkMode ? 'â˜€ï¸ Light' : 'ğŸŒ™ Dark'}
        </button>
      </nav>
      {active === 'home'    && <HomePage onSelect={setActive} darkMode={darkMode} />}
      {active === 'subnet'  && <SubnetCalculator darkMode={darkMode} />}
      {active === 'wifi'    && <WiFiQRGenerator darkMode={darkMode} />}
      {active === 'uptime'  && <UptimeCalculator darkMode={darkMode} />}
      {active === 'latency' && <NetworkLatencyTester />}
    </>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
